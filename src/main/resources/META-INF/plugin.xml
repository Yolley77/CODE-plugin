<idea-plugin>
    <id>ru.codeplugin.methodology</id>
    <name>CODE Methodology (Simple)</name>
    <vendor email="you@example.com">CODE Team</vendor>
    <version>0.1.0</version>

    <depends>com.intellij.modules.platform</depends>
    <depends>Git4Idea</depends>

    <extensions defaultExtensionNs="com.intellij">
        <notificationGroup id="CODE" displayType="BALLOON"/>
        <postStartupActivity implementation="ru.codeplugin.startup.CodeStartupActivity"/>
        <toolWindow
                id="CODE"
                factoryClass="ru.codeplugin.ui.CodeToolWindowFactory"
                anchor="right"
                icon="/icons/code.svg"/>

        <localInspection
                implementationClass="ru.codeplugin.inspections.NotFormattedInspection"
                shortName="CodeNotFormatted"
                displayName="Файл не отформатирован (CODE)"
                groupPath="CODE"
                enabledByDefault="true" language=""/>
    </extensions>

    <actions>
        <group id="ru.codeplugin.actions.CodeToolbarGroup"
               text="CODE"
               popup="true"
               icon="/icons/code.svg">
            <add-to-group group-id="MainToolbarRight" anchor="last"/>

            <action id="ru.codeplugin.action.prepare"
                    class="ru.codeplugin.actions.ValidateBranchNameAction"
                    text="Prepare: Validate Branch Name"
                    description="Проверить, что текущая ветка соответствует CODE branch_format"/>

            <action id="ru.codeplugin.action.develop"
                    class="ru.codeplugin.actions.RunDevelopChecksAction"
                    text="Develop: Check &amp; Format Current File"
                    description="Форматировать текущий файл по Code Style (CODE)"/>

            <action id="ru.codeplugin.action.control"
                    class="ru.codeplugin.actions.ControlCheckCoverageAction"
                    text="Control: Check Coverage"
                    description="Проверить покрытие тестами по Jacoco-отчёту"/>

            <action id="ru.codeplugin.action.control.aiTests"
                    class="ru.codeplugin.actions.ControlAiSuggestTestsAction"
                    text="Control: AI Suggest Tests"
                    description="Получить от AI сценарии и примеры реализации тестов"/>

            <action id="ru.codeplugin.action.apply"
                    class="ru.codeplugin.actions.ApplyValidateChangesAction"
                    text="Apply: Validate Changed Files &amp; Branch Age"
                    description="Проверить размер изменений и возраст ветки"/>

            <action id="ru.codeplugin.action.apply.aiPrDescription"
                    class="ru.codeplugin.actions.ApplyAiSuggestPrDescriptionAction"
                    text="Apply: AI Suggest PR Description"
                    description="Сгенерировать с помощью AI описание PR и название коммита"/>

            <action id="ru.codeplugin.action.reloadConfig"
                    class="ru.codeplugin.actions.ReloadCodeConfigAction"
                    text="Reload CODE.yaml"
                    description="Перечитать конфигурацию CODE из CODE.yaml"/>
        </group>

    </actions>

</idea-plugin>
